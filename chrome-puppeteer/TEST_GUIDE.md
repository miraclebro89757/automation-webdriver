# Pumpkin-Web 自动化测试指南

## 🎯 测试目标

这个 Puppeteer 测试脚本将全面测试 pumpkin-web 应用的功能，包括：

1. **导航功能测试** - 点击不同的 tab 页面
2. **表单交互测试** - 单选和多选功能
3. **页面内容验证** - 确保页面正确加载
4. **截图功能** - 保存测试过程的截图

## 📋 测试内容

### 1. 首页表单测试
- ✅ **多选功能测试**：选择多个南瓜吃法选项
  - 南瓜粥 🥣
  - 南瓜饼 🥞
  - 南瓜汤 🍲
  - 南瓜派 🥧
- ✅ **单选功能测试**：选择地区
  - 中国 🇨🇳
  - 美国 🇺🇸
  - 墨西哥 🇲🇽
- ✅ **取消选择测试**：验证多选项的取消功能

### 2. 导航功能测试
- ✅ **南瓜的历史页面**：点击 tab 并验证内容
- ✅ **南瓜的品种页面**：点击 tab 并验证内容
- ✅ **南瓜游戏页面**：点击 tab 并测试重置功能

### 3. 页面验证
- ✅ 验证页面标题正确
- ✅ 验证页面内容加载
- ✅ 验证表单交互响应

## 🚀 运行测试

### 前置条件

1. **启动 pumpkin-web 应用**
   ```bash
   cd pumpkin-web
   npm install
   npm run dev
   ```
   确保应用在 `http://localhost:5173` 运行

2. **安装 Puppeteer 依赖**
   ```bash
   cd chrome-puppeteer
   npm install
   ```

### 执行测试

```bash
# 方法1：使用 npm 脚本
npm test

# 方法2：直接运行
node test-pumpkin-web.js
```

## 📸 测试输出

测试完成后会生成以下截图文件：

- `pumpkin-history.png` - 南瓜的历史页面截图
- `pumpkin-varieties.png` - 南瓜的品种页面截图  
- `pumpkin-game.png` - 南瓜游戏页面截图
- `pumpkin-final.png` - 最终页面截图
- `pumpkin-error.png` - 错误截图（如果测试失败）

## 🔧 测试脚本特性

### 浏览器配置
- **非无头模式**：`headless: false` - 可以看到浏览器操作过程
- **视窗大小**：1200x800 像素
- **等待策略**：`networkidle0` - 等待网络空闲

### 交互等待
- 点击后等待 300-1000ms 确保动画完成
- 使用 `waitForSelector` 确保元素加载
- 错误处理包含截图保存

### 选择器策略
- 使用文本选择器：`text=南瓜粥 🥣`
- 使用类选择器：`.ant-checkbox-group`
- 使用标签选择器：`h2`, `button`

## 🐛 故障排除

### 常见问题

1. **连接失败**
   - 确保 pumpkin-web 应用正在运行
   - 检查端口是否为 5173

2. **元素找不到**
   - 检查页面是否完全加载
   - 验证选择器是否正确

3. **截图失败**
   - 检查文件权限
   - 确保目录可写

### 调试模式

修改测试脚本中的 `headless: false` 可以看到浏览器操作过程，便于调试。

## 📝 自定义测试

你可以修改 `test-pumpkin-web.js` 来：

1. **添加新的测试用例**
2. **修改等待时间**
3. **更改选择器策略**
4. **添加更多验证逻辑**

## 🎉 测试完成

测试成功后会显示：
```
🎉 所有测试完成！
📁 生成的截图文件:
  - pumpkin-history.png (南瓜的历史页面)
  - pumpkin-varieties.png (南瓜的品种页面)
  - pumpkin-game.png (南瓜游戏页面)
  - pumpkin-final.png (最终页面)
``` 